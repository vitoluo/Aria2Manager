(()=>{var e={50:(e,r,t)=>{"use strict";const s=t(657);e.exports=s},657:(e,r,t)=>{"use strict";const s=t(307);function n(e){return e.startsWith("system.")||e.startsWith("aria2.")||(e="aria2."+e),e}function i(e){return e.split("aria2.")[1]||e}class o extends s{addSecret(e){let r=this.secret?["token:"+this.secret]:[];return Array.isArray(e)&&(r=r.concat(e)),r}_onnotification(e){const{method:r,params:t}=e,s=i(r);return s!==r&&this.emit(s,t),super._onnotification(e)}async call(e,...r){return super.call(n(e),this.addSecret(r))}async multicall(e){const r=[e.map((([e,...r])=>({methodName:n(e),params:this.addSecret(r)})))];return super.call("system.multicall",r)}async batch(e){return super.batch(e.map((([e,...r])=>[n(e),this.addSecret(r)])))}async listNotifications(){return(await this.call("system.listNotifications")).map((e=>i(e)))}async listMethods(){return(await this.call("system.listMethods")).map((e=>i(e)))}}Object.assign(o,{prefix:n,unprefix:i}),o.defaultOptions=Object.assign({},s.defaultOptions,{secure:!1,host:"localhost",port:6800,secret:"",path:"/jsonrpc"}),e.exports=o},683:e=>{"use strict";e.exports=function(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}},307:(e,r,t)=>{"use strict";const s=t(683),n=t(942),i=t(664),o=t(165),a=t(215),g=t(187),m=t.g.WebSocket||o,c=t.g.fetch?t.g.fetch.bind(t.g):a;class l extends g{constructor(e){super(),this.deferreds=Object.create(null),this.lastId=0,Object.assign(this,this.constructor.defaultOptions,e)}id(){return this.lastId++}url(e){return e+(this.secure?"s":"")+"://"+this.host+":"+this.port+this.path}websocket(e){return new Promise(((r,s)=>{const n=e=>{e?s(e):r()};this.socket.send(JSON.stringify(e),n),t.g.WebSocket&&this.socket instanceof t.g.WebSocket&&n()}))}async http(e){const r=await this.fetch(this.url("http"),{method:"POST",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"}});return r.json().then((e=>this._onmessage(e))).catch((e=>{this.emit("error",e)})),r}_buildMessage(e,r){if("string"!=typeof e)throw new TypeError(e+" is not a string");const t={method:e,"json-rpc":"2.0",id:this.id()};return r&&Object.assign(t,{params:r}),t}async batch(e){const r=e.map((([e,r])=>this._buildMessage(e,r)));return await this._send(r),r.map((({id:e})=>{const{promise:r}=this.deferreds[e]=new s;return r}))}async call(e,r){const t=this._buildMessage(e,r);await this._send(t);const{promise:n}=this.deferreds[t.id]=new s;return n}async _send(e){this.emit("output",e);const{socket:r}=this;return r&&1===r.readyState?this.websocket(e):this.http(e)}_onresponse({id:e,error:r,result:t}){const s=this.deferreds[e];s&&(r?s.reject(new i(r)):s.resolve(t),delete this.deferreds[e])}_onrequest({method:e,params:r}){return this.onrequest(e,r)}_onnotification({method:e,params:r}){this.emit(e,r)}_onmessage(e){if(this.emit("input",e),Array.isArray(e))for(const r of e)this._onobject(r);else this._onobject(e)}_onobject(e){void 0===e.method?this._onresponse(e):void 0===e.id?this._onnotification(e):this._onrequest(e)}async open(){const e=this.socket=new this.WebSocket(this.url("ws"));return e.onclose=(...e)=>{this.emit("close",...e)},e.onmessage=e=>{let r;try{r=JSON.parse(e.data)}catch(e){return void this.emit("error",e)}this._onmessage(r)},e.onopen=(...e)=>{this.emit("open",...e)},e.onerror=(...e)=>{this.emit("error",...e)},n(this,"open")}async close(){const{socket:e}=this;return e.close(),n(this,"close")}}l.defaultOptions={secure:!1,host:"localhost",port:80,secret:"",path:"/jsonrpc",fetch:c,WebSocket:m},e.exports=l},664:e=>{"use strict";e.exports=class extends Error{constructor({message:e,code:r,data:t}){super(e),this.code=r,t&&(this.data=t),this.name=this.constructor.name}}},942:e=>{"use strict";e.exports=function(e,r){return new Promise(((t,s)=>{function n(){e.removeListener(r,i),e.removeListener("error",o)}function i(e){t(e),n()}function o(e){s(e),n()}e.addListener(r,i),e.addListener("error",o)}))}},187:e=>{"use strict";var r,t="object"==typeof Reflect?Reflect:null,s=t&&"function"==typeof t.apply?t.apply:function(e,r,t){return Function.prototype.apply.call(e,r,t)};r=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,r){return new Promise((function(t,s){function n(t){e.removeListener(r,i),s(t)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",n),t([].slice.call(arguments))}f(e,r,i,{once:!0}),"error"!==r&&function(e,r,t){"function"==typeof e.on&&f(e,"error",r,{once:!0})}(e,n)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function g(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function m(e,r,t,s){var n,i,o,m;if(a(t),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",r,t.listener?t.listener:t),i=e._events),o=i[r]),void 0===o)o=i[r]=t,++e._eventsCount;else if("function"==typeof o?o=i[r]=s?[t,o]:[o,t]:s?o.unshift(t):o.push(t),(n=g(e))>0&&o.length>n&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=r,c.count=o.length,m=c,console&&console.warn&&console.warn(m)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,r,t){var s={fired:!1,wrapFn:void 0,target:e,type:r,listener:t},n=c.bind(s);return n.listener=t,s.wrapFn=n,n}function A(e,r,t){var s=e._events;if(void 0===s)return[];var n=s[r];return void 0===n?[]:"function"==typeof n?t?[n.listener||n]:[n]:t?function(e){for(var r=new Array(e.length),t=0;t<r.length;++t)r[t]=e[t].listener||e[t];return r}(n):d(n,n.length)}function u(e){var r=this._events;if(void 0!==r){var t=r[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function d(e,r){for(var t=new Array(r),s=0;s<r;++s)t[s]=e[s];return t}function f(e,r,t,s){if("function"==typeof e.on)s.once?e.once(r,t):e.on(r,t);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(r,(function n(i){s.once&&e.removeEventListener(r,n),t(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return g(this)},i.prototype.emit=function(e){for(var r=[],t=1;t<arguments.length;t++)r.push(arguments[t]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var g=i[e];if(void 0===g)return!1;if("function"==typeof g)s(g,this,r);else{var m=g.length,c=d(g,m);for(t=0;t<m;++t)s(c[t],this,r)}return!0},i.prototype.addListener=function(e,r){return m(this,e,r,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,r){return m(this,e,r,!0)},i.prototype.once=function(e,r){return a(r),this.on(e,l(this,e,r)),this},i.prototype.prependOnceListener=function(e,r){return a(r),this.prependListener(e,l(this,e,r)),this},i.prototype.removeListener=function(e,r){var t,s,n,i,o;if(a(r),void 0===(s=this._events))return this;if(void 0===(t=s[e]))return this;if(t===r||t.listener===r)0==--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,t.listener||r));else if("function"!=typeof t){for(n=-1,i=t.length-1;i>=0;i--)if(t[i]===r||t[i].listener===r){o=t[i].listener,n=i;break}if(n<0)return this;0===n?t.shift():function(e,r){for(;r+1<e.length;r++)e[r]=e[r+1];e.pop()}(t,n),1===t.length&&(s[e]=t[0]),void 0!==s.removeListener&&this.emit("removeListener",e,o||r)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var r,t,s;if(void 0===(t=this._events))return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete t[e]),this;if(0===arguments.length){var n,i=Object.keys(t);for(s=0;s<i.length;++s)"removeListener"!==(n=i[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(r=t[e]))this.removeListener(e,r);else if(void 0!==r)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this},i.prototype.listeners=function(e){return A(this,e,!0)},i.prototype.rawListeners=function(e){return A(this,e,!1)},i.listenerCount=function(e,r){return"function"==typeof e.listenerCount?e.listenerCount(r):u.call(e,r)},i.prototype.listenerCount=u,i.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},416:(e,r,t)=>{"use strict";r.browser=t(150)},150:function(e,r){var t,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,void 0===(s="function"==typeof(t=function(e){"use strict";if("undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const r="The message port closed before a response was received.",t="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",s=e=>{const s={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(s).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,r){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const i=(r,t)=>(...s)=>{e.runtime.lastError?r.reject(e.runtime.lastError):t.singleCallbackArg||s.length<=1&&!1!==t.singleCallbackArg?r.resolve(s[0]):r.resolve(s)},o=e=>1==e?"argument":"arguments",a=(e,r,t)=>new Proxy(r,{apply:(r,s,n)=>t.call(s,e,...n)});let g=Function.call.bind(Object.prototype.hasOwnProperty);const m=(e,r={},t={})=>{let s=Object.create(null),n={has:(r,t)=>t in e||t in s,get(n,c,l){if(c in s)return s[c];if(!(c in e))return;let A=e[c];if("function"==typeof A)if("function"==typeof r[c])A=a(e,e[c],r[c]);else if(g(t,c)){let r=((e,r)=>function(t,...s){if(s.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${o(r.minArgs)} for ${e}(), got ${s.length}`);if(s.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${o(r.maxArgs)} for ${e}(), got ${s.length}`);return new Promise(((n,o)=>{if(r.fallbackToNoCallback)try{t[e](...s,i({resolve:n,reject:o},r))}catch(i){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,i),t[e](...s),r.fallbackToNoCallback=!1,r.noCallback=!0,n()}else r.noCallback?(t[e](...s),n()):t[e](...s,i({resolve:n,reject:o},r))}))})(c,t[c]);A=a(e,e[c],r)}else A=A.bind(e);else if("object"==typeof A&&null!==A&&(g(r,c)||g(t,c)))A=m(A,r[c],t[c]);else{if(!g(t,"*"))return Object.defineProperty(s,c,{configurable:!0,enumerable:!0,get:()=>e[c],set(r){e[c]=r}}),A;A=m(A,r[c],t["*"])}return s[c]=A,A},set:(r,t,n,i)=>(t in s?s[t]=n:e[t]=n,!0),defineProperty:(e,r,t)=>Reflect.defineProperty(s,r,t),deleteProperty:(e,r)=>Reflect.deleteProperty(s,r)},c=Object.create(e);return new Proxy(c,n)},c=e=>({addListener(r,t,...s){r.addListener(e.get(t),...s)},hasListener:(r,t)=>r.hasListener(e.get(t)),removeListener(r,t){r.removeListener(e.get(t))}});let l=!1;const A=new n((e=>"function"!=typeof e?e:function(r,s,n){let i,o,a=!1,g=new Promise((e=>{i=function(r){l||(console.warn(t,(new Error).stack),l=!0),a=!0,e(r)}}));try{o=e(r,s,i)}catch(e){o=Promise.reject(e)}const m=!0!==o&&((c=o)&&"object"==typeof c&&"function"==typeof c.then);var c;if(!0!==o&&!m&&!a)return!1;return(m?o:g).then((e=>{n(e)}),(e=>{let r;r=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:r})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),u=({reject:t,resolve:s},n)=>{e.runtime.lastError?e.runtime.lastError.message===r?s():t(e.runtime.lastError):n&&n.__mozWebExtensionPolyfillReject__?t(new Error(n.message)):s(n)},d=(e,r,t,...s)=>{if(s.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${o(r.minArgs)} for ${e}(), got ${s.length}`);if(s.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${o(r.maxArgs)} for ${e}(), got ${s.length}`);return new Promise(((e,r)=>{const n=u.bind(null,{resolve:e,reject:r});s.push(n),t.sendMessage(...s)}))},f={runtime:{onMessage:c(A),onMessageExternal:c(A),sendMessage:d.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:d.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},h={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return s.privacy={network:{"*":h},services:{"*":h},websites:{"*":h}},m(e,f,s)};if("object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");e.exports=s(chrome)}else e.exports=browser})?t.apply(r,[e]):t)||(e.exports=s)},215:()=>{},165:()=>{}},r={};function t(s){var n=r[s];if(void 0!==n)return n.exports;var i=r[s]={exports:{}};return e[s].call(i.exports,i,i.exports,t),i.exports}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";var e;t(50),function(e){e[e.ConfigModify=0]="ConfigModify",e[e.DownloadInfo=1]="DownloadInfo",e[e.Aria2Dl=2]="Aria2Dl",e[e.BrowserDl=3]="BrowserDl"}(e||(e={}));class r{constructor(){this.url="",this.filename="",this.referer="",this.cookie="",this["user-agent"]=""}}var s,n,i,o,a=t(416);function g(r){const t=m(),s=[];t.referer&&s.push({name:"referer",value:t.referer});const n={url:t.url,filename:t.filename,headers:s,saveAs:r},i={type:e.BrowserDl,data:n};a.browser.runtime.sendMessage(i).then((()=>window.close()))}function m(){const e=new r;for(const r of Object.keys(e)){const t=document.querySelector(`#${r}`);t&&(e[r]=t.value)}return e}document.addEventListener("DOMContentLoaded",(async function(){const r=await a.browser.windows.getCurrent();if(r.id){const t={type:e.DownloadInfo,data:{windowId:r.id}},s=await a.browser.runtime.sendMessage(t);for(const[e,r]of Object.entries(s)){const t=document.querySelector(`#${e}`);t&&r&&(t.value=r)}}})),null===(s=document.querySelector("#download"))||void 0===s||s.addEventListener("click",(function(){const r=m(),t={uris:[r.url],options:{out:r.filename,referer:r.referer,"user-agent":r["user-agent"],header:[`cookie: ${r.cookie}`]}},s={type:e.Aria2Dl,data:t};a.browser.runtime.sendMessage(s).then((()=>window.close()))})),null===(n=document.querySelector("#browserDl"))||void 0===n||n.addEventListener("click",(()=>g(!1))),null===(i=document.querySelector("#browserSaveAs"))||void 0===i||i.addEventListener("click",(()=>g(!0))),null===(o=document.querySelector("#cancel"))||void 0===o||o.addEventListener("click",(function(){window.close()}))})()})();